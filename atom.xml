<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Absyah Playground]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://absyah.github.io/"/>
  <updated>2015-12-31T11:46:12.000Z</updated>
  <id>http://absyah.github.io/</id>
  
  <author>
    <name><![CDATA[Ardian Bahtiarsyah]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[I Think Cloudinary Is AWS S3 Killer]]></title>
    <link href="http://absyah.github.io/2015/12/31/i-think-cloudinary-is-aws-s3-killer/"/>
    <id>http://absyah.github.io/2015/12/31/i-think-cloudinary-is-aws-s3-killer/</id>
    <published>2015-12-31T08:22:19.000Z</published>
    <updated>2015-12-31T11:46:12.000Z</updated>
    <content type="html"><![CDATA[<p>This is dilema untuk developer terutama ruby on rails developer yang punya modal pas-pasan ketika dihadapkan dengan fitur upload file, baik image; video; maupun jenis file lainnya. </p>
<p>Tidak punya kartu kredit, tidak punya vps untuk nge-host aplikasinya juga. Cuma ada akun <a href="https://heroku.com" target="_blank" rel="external">heroku</a>. Terus harus naruh hasil upload dimana? </p>
<a id="more"></a>
<p>Dropbox? Okay, tapi sangat lambat ketika load file nya, dan pasti nemuin masalah file name.<br>Google drive? Did not try it yet, tapi kelihatannya menjanjikan. Cuma masalahnya google drive tidak diperuntukkan untuk CDN aplikasi, kan?</p>
<p>Nah beberapa minggu lalu / entah bulan (agak lupa kapan), salah seorang <a href="https://www.facebook.com/van.bumi" target="_blank" rel="external">teman</a> nge-share tentang <a href="http://cloudinary.com/invites/lpov9zyyucivvxsnalc5/yo3rsfmxcrpoequbdazr" target="_blank" rel="external">cloudinary</a>.</p>
<p>Begitu lihat landing pagenya, saya langsung gini kira-kira :</p>
<blockquote>
<p>Wow, ini dia solusi untuk teman-teman RoR developer. Storage…!! storage…!!! No credit card required…!!! Awesome!!!! Must try…!! Must try…!!</p>
</blockquote>
<p>Finally, saya diberi kesempatan untuk mencobanya. Tapi ngomong-ngomong saya akan mencobanya di ruby on rails saja, sekalipun saya jago NodeJS &amp; AngularJS juga :P.. Lah, gak percaya? Cek saja <a href="https://id.linkedin.com/in/ardian-bahtiarsyah-0ab46654" target="_blank" rel="external">KTP saya</a> hahaha :D just kidding!! Masih newbie juga kok om.. :bow:</p>
<p>yuk mari, mulai…!!</p>
<hr>
<h1 id="Asumsi_sudah_ada_existing_things_di_RoR_aplikasi"><a href="#Asumsi_sudah_ada_existing_things_di_RoR_aplikasi" class="headerlink" title="Asumsi sudah ada existing things di RoR aplikasi"></a>Asumsi sudah ada existing things di RoR aplikasi</h1><p>Jadi disini cuma akan diajari pasang fitur upload, teman-teman bisa lah ya nge-create rails app terus generate file-file-nya.</p>
<p>Kalau misal belum bisa dan pingin belajar, perlu deh stay tune mantengin <a href="http://idrails.com" target="_blank" rel="external">idrails</a> yang gak akan lama lagi launching, doakan saja :)</p>
<h1 id="Registrasi"><a href="#Registrasi" class="headerlink" title="Registrasi"></a>Registrasi</h1><p>Silakan register dulu buat panen beberapa credentials dari <a href="http://cloudinary.com/invites/lpov9zyyucivvxsnalc5/yo3rsfmxcrpoequbdazr" target="_blank" rel="external">cloudinary</a>. Setelah itu akan digiring ke halaman dashboard</p>
<p><img src="http://i.imgur.com/nzEERQu.png" alt="dashboard"></p>
<h1 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h1><h4 id="Credentials"><a href="#Credentials" class="headerlink" title="Credentials"></a>Credentials</h4><p>Ini cukup download file <code>cloudinary.yml</code> yang sudah disediakan. Lalu taruh file tersebut pada <code>config/</code> directory sejajar dengan <code>database.yml</code></p>
<h4 id="Cloudinary"><a href="#Cloudinary" class="headerlink" title="Cloudinary"></a>Cloudinary</h4><ul>
<li><p>Tambahkan pada <code>Gemfile</code> :</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">gem</span> <span class="string">"cloudinary"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Jalankan <code>bundle install</code>. Kemudian coba dicek apakah sudah bisa upload apa belum. Bisa lewat <code>rails c</code> lalu ketik <code>2.2.3 :002 &gt; Cloudinary::Uploader.upload(&lt;path_to_image&gt;)</code>, misalnya :</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.2</span><span class="number">.3</span> :<span class="number">002</span> &gt; Cloudinary::Uploader.upload(<span class="string">'/home/ardian/Pictures/chat.png'</span>)</span><br><span class="line"> =&gt; &#123;<span class="string">"public_id"</span>=&gt;<span class="string">"q9eahpbpdykbmirlxyya"</span>, <span class="string">"version"</span>=&gt;<span class="number">1451546307</span>, <span class="string">"signature"</span>=&gt;<span class="string">"a790b93219dd0054a6078e66de2f4ff84809c46a"</span>, <span class="string">"width"</span>=&gt;<span class="number">1319</span>, <span class="string">"height"</span>=&gt;<span class="number">744</span>, <span class="string">"format"</span>=&gt;<span class="string">"png"</span>, <span class="string">"resource_type"</span>=&gt;<span class="string">"image"</span>, <span class="string">"created_at"</span>=&gt;<span class="string">"2015-12-31T07:18:27Z"</span>, <span class="string">"tags"</span>=&gt;[], <span class="string">"bytes"</span>=&gt;<span class="number">142002</span>, <span class="string">"type"</span>=&gt;<span class="string">"upload"</span>, <span class="string">"etag"</span>=&gt;<span class="string">"b43dee8bc213c1e9c822d8917ba1f3b7"</span>, <span class="string">"url"</span>=&gt;<span class="string">"http://res.cloudinary.com/absyah/image/upload/v1451546307/q9eahpbpdykbmirlxyya.png"</span>, <span class="string">"secure_url"</span>=&gt;<span class="string">"https://res.cloudinary.com/absyah/image/upload/v1451546307/q9eahpbpdykbmirlxyya.png"</span>, <span class="string">"original_filename"</span>=&gt;<span class="string">"chat"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Kalau output sudah seperti diatas, berarti sudah OK! So far sampai sini mudah, kan? :)</p>
<h4 id="Attachinary"><a href="#Attachinary" class="headerlink" title="Attachinary"></a>Attachinary</h4><ul>
<li><p>Tambah Gem Attachinary<br><a href="https://github.com/assembler/attachinary" target="_blank" rel="external">Attachinary</a> adalah gem wrapper untuk Cloudinary.</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">gem</span> <span class="string">'attachinary'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Jalankan <code>bundle install</code> dan pada <code>application.rb</code>, include :</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">"attachinary/orm/active_record"</span> <span class="comment"># active_record atau mongoid</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Run <code>rake attachinary:install:migrations</code> dan <code>rake db:migrate</code><br>Ketika kita eksekusi perintah <code>rake attachinary:install:migrations</code> pada aplikasi kita akan ada new migration seperti ini : </p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This migration comes from attachinary (originally 20120612112526)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CreateAttachinaryTables</span> <span class="inheritance">&lt; <span class="parent">ActiveRecord::Migration</span></span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">change</span></span></span><br><span class="line">    create_table <span class="symbol">:attachinary_files</span> <span class="keyword">do</span> |t|</span><br><span class="line">      t.references <span class="symbol">:attachinariable</span>, <span class="symbol">polymorphic:</span> <span class="keyword">true</span></span><br><span class="line">      t.string <span class="symbol">:scope</span></span><br><span class="line"></span><br><span class="line">      t.string <span class="symbol">:public_id</span></span><br><span class="line">      t.string <span class="symbol">:version</span></span><br><span class="line">      t.integer <span class="symbol">:width</span></span><br><span class="line">      t.integer <span class="symbol">:height</span></span><br><span class="line">      t.string <span class="symbol">:format</span></span><br><span class="line">      t.string <span class="symbol">:resource_type</span></span><br><span class="line">      t.timestamps</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    add_index <span class="symbol">:attachinary_files</span>, [<span class="symbol">:attachinariable_type</span>, <span class="symbol">:attachinariable_id</span>, <span class="symbol">:scope</span>], <span class="symbol">name:</span> <span class="string">'by_scoped_parent'</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Mount attachinary pada <code>routes.rb</code> :</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount Attachinary::Engine =&gt; <span class="string">"/attachinary"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Generate file-file javascript yang diperlukan : </p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">rake</span> attachinary:fetch_fileupload <span class="comment"># download required js file</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Include pada <code>application.js</code> :</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//= require jquery.ui.widget</span></span><br><span class="line"><span class="comment">//= require jquery.iframe-transport</span></span><br><span class="line"><span class="comment">//= require jquery.fileupload</span></span><br><span class="line"><span class="comment">//= require cloudinary/jquery.cloudinary</span></span><br><span class="line"><span class="comment">//= require attachinary</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Dan yang terakhir, tambahkan pada header application layout <code>&lt;%= cloudinary_js_config %&gt;</code><br>Application layout akan seperti ini jadinya :</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>App Keren<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">  </span>&lt;%=<span class="ruby"> stylesheet_link_tag    <span class="string">'application'</span>, <span class="symbol">media:</span> <span class="string">'all'</span> </span>%&gt;<span class="xml"></span><br><span class="line">  </span>&lt;%=<span class="ruby"> javascript_include_tag <span class="string">'application'</span> </span>%&gt;<span class="xml"></span><br><span class="line">  </span>&lt;%=<span class="ruby"> cloudinary_js_config </span>%&gt;<span class="xml"></span><br><span class="line">  </span>&lt;%=<span class="ruby"> csrf_meta_tags </span>%&gt;<span class="xml"></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="Setup_Model"><a href="#Setup_Model" class="headerlink" title="Setup Model"></a>Setup Model</h4><p>Misal kita punya model <code>Product</code>, akan kita tambahkan <code>Product</code> has many <code>Image</code>s, gak asik kan kalau jualan tapi gak ada imagenya :D</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">validates <span class="symbol">:images</span>, <span class="symbol">presence:</span> <span class="keyword">true</span></span><br><span class="line">has_attachments <span class="symbol">:images</span>, <span class="symbol">maximum:</span> <span class="number">5</span>, <span class="symbol">accept:</span> [<span class="symbol">:jpg</span>, <span class="symbol">:png</span>, <span class="symbol">:gif</span>]</span><br></pre></td></tr></table></figure>
<p>Nah disini asyiknya, kita gak perlu update migrasi pada <code>Product</code> untuk menambahkan <code>images</code> attribute. Dibandingkan dengan gem-gem lainnya yang kita perlu menambahkan migrasi baru, misalnya pada gem paperclip harus <code>add_attachment :products, :image</code>.</p>
<h4 id="Setup_View_dan_Controller"><a href="#Setup_View_dan_Controller" class="headerlink" title="Setup View dan Controller"></a>Setup View dan Controller</h4><p>Pada form <code>Product</code>, tambahkan</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span>&lt;%=<span class="ruby"> f.attachinary_file_field <span class="symbol">:images</span> </span>%&gt;<span class="xml"></span></span><br></pre></td></tr></table></figure>
<p>Dan finally pada controller, tambahkan pada strong parameters. Misalnya :</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">params</span><span class="class">.require</span>(<span class="pseudo">:product)</span><span class="class">.permit</span>(<span class="pseudo">:name</span>, <span class="pseudo">:price</span>, <span class="pseudo">:description</span>, <span class="tag">images</span>: <span class="attr_selector">[]</span>)</span><br></pre></td></tr></table></figure>
<p>Untuk menampilkannya, pada <code>show.html.erb</code> tambahkan :<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="variable">@product</span>.images.each <span class="keyword">do</span> |<span class="keyword">image</span>| <span class="variable">%&gt;</span></span><br><span class="line">    &lt;<span class="variable">%=</span> cl_image_tag(<span class="keyword">image</span>.path, &#123; <span class="keyword">size</span>: <span class="string">'125x125'</span>, crop: :fit &#125;) <span class="variable">%&gt;</span></span><br><span class="line">&lt;% end <span class="variable">%&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><img src="http://i.imgur.com/idQePrY.png" alt="hasil"></p>
<p>Screenshot diatas adalah hasil dari coba-coba implementasi upload dengan <a href="http://cloudinary.com/invites/lpov9zyyucivvxsnalc5/yo3rsfmxcrpoequbdazr" target="_blank" rel="external">Cloudinary</a> dan <a href="https://github.com/assembler/attachinary" target="_blank" rel="external">Attachinary</a>. Bisa kelihatan ada image preview ketika kita select image. Selain itu ada progress percentage nya juga ketika proses upload image sedang berlangsung. Awesome, just awesome!! </p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Dulu waktu pertama kali coba implementasi fitur upload dengan AWS S3 + Paperclip, saya mencoba beberapa kali sampai berhasil. Ketika saya mencoba implementasi dengan <a href="http://cloudinary.com/invites/lpov9zyyucivvxsnalc5/yo3rsfmxcrpoequbdazr" target="_blank" rel="external">Cloudinary</a> + <a href="https://github.com/assembler/attachinary" target="_blank" rel="external">Attachinary</a> saya merasa inilah kombinasi yang pas dan mudah diterapkan untuk fitur upload dipenghujung akhir tahun ini :)</p>
<p>Satu hal yang terpenting adalah pada <a href="http://cloudinary.com/invites/lpov9zyyucivvxsnalc5/yo3rsfmxcrpoequbdazr" target="_blank" rel="external">Cloudinary</a> tidak membutuhkan credit card hanya untuk sekadar free plan. :D</p>
<p>So, I think <a href="http://cloudinary.com/invites/lpov9zyyucivvxsnalc5/yo3rsfmxcrpoequbdazr" target="_blank" rel="external">Cloudinary</a> is AWS S3 killer. What do you think?</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>This is dilema untuk developer terutama ruby on rails developer yang punya modal pas-pasan ketika dihadapkan dengan fitur upload file, baik image; video; maupun jenis file lainnya. </p>
<p>Tidak punya kartu kredit, tidak punya vps untuk nge-host aplikasinya juga. Cuma ada akun <a href="https://heroku.com">heroku</a>. Terus harus naruh hasil upload dimana? </p>]]>
    
    </summary>
    
      <category term="RubyOnRails" scheme="http://absyah.github.io/all-tags/RubyOnRails/"/>
    
      <category term="Programming" scheme="http://absyah.github.io/all-archivescategories/Programming/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[No More Horror Issue 'It Works on My Machine' RoR Development Using Vagrant & Chef]]></title>
    <link href="http://absyah.github.io/2015/12/12/No-More-Horror-Issue-It-Works-on-My-Machine-RoR-Development-Using-Vagrant-Chef/"/>
    <id>http://absyah.github.io/2015/12/12/No-More-Horror-Issue-It-Works-on-My-Machine-RoR-Development-Using-Vagrant-Chef/</id>
    <published>2015-12-12T08:06:00.000Z</published>
    <updated>2015-12-31T10:30:53.000Z</updated>
    <content type="html"><![CDATA[<p>“Kok dilokalku g jalan gini app nya?”</p>
<p>Sering ngalamin masalah itu? Dimana ketika suatu fitur dapat berjalan di lokal developer lain, sedangkan di lokal kita error disana-sini / bahkan app tersebut tidak dapat berjalan sama sekali.</p>
<p>Yep, saya sering mengalaminya dan sekarang ada solusinya!</p>
<a id="more"></a>
<h1 id="Vagrant"><a href="#Vagrant" class="headerlink" title="Vagrant"></a>Vagrant</h1><p>Vagrant adalah sebuah tool yang secara otomatis melakukan setup development environment didalam mesin virtual didalam komputer. Anda akan dapat melakukan <code>ssh</code> dari lokal komputer host menuju lokal pada mesin virtual.</p>
<p>Dengan demikian, <em>development environment</em> Anda akan dapat sama persis dengan <em>production environment</em> dan juga dapat didistribusikan kepada seluruh team kolaborasi Anda sehingga mereka juga memiliki environment yang sama tidak peduli jenis konfigurasi komputer / laptop yang digunakan untuk development. <em>Awesome!</em></p>
<h1 id="Chef"><a href="#Chef" class="headerlink" title="Chef"></a>Chef</h1><p>Chef adalah sebuah tool yang dapat melakukan otomatisasi setup untuk virtual mesin / server, misalnya instal DBMS, ruby, dan prerequisites lainnya yang dibutuhkan dalam sebuah development aplikasi.</p>
<p>Dengan demikian kita tidak perlu melakukan instalasi satu persatu kebutuhan konfigurasi yang diperlukan.</p>
<h5 id="STEP_1_-_Installation"><a href="#STEP_1_-_Installation" class="headerlink" title="STEP 1 - Installation"></a>STEP 1 - Installation</h5><ul>
<li>Install <a href="https://vagrantup.com/downloads" target="_blank" rel="external">vagrant</a></li>
<li>Install <a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="external">virtualbox</a></li>
<li><p>Install vagrant plugin :</p>
<ul>
<li><code>$ vagrant plugin install vagrant-vbguest</code>, install otomatis host dari VirtualBox Guest Additions</li>
<li><code>$ vagrant plugin install vagrant-librarian-chef</code>, memberitahu vagrant untuk running Chef ketika vagrant dijalankan</li>
</ul>
</li>
<li><p><code>$ cd to/root/app_directory</code></p>
</li>
<li><p><code>$ vagrant init</code>, akan menggenerate vagrantfile pada root directory aplikasi</p>
</li>
<li><code>$ touch Cheffile</code>, akan membuat Cheffile pada root directory aplikasi</li>
</ul>
<h5 id="STEP_2_-_Configuration"><a href="#STEP_2_-_Configuration" class="headerlink" title="STEP 2 - Configuration"></a>STEP 2 - Configuration</h5><p>Buka file Cheffile, lalu tambahkan code berikut :<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">site <span class="string">"http://community.opscode.com/api/v1"</span></span><br><span class="line"></span><br><span class="line">cookbook <span class="string">'apt'</span></span><br><span class="line">cookbook <span class="string">'build-essential'</span></span><br><span class="line">cookbook <span class="string">'mysql'</span>, <span class="string">'5.5.3'</span></span><br><span class="line">cookbook <span class="string">'ruby_build'</span></span><br><span class="line">cookbook <span class="string">'nodejs'</span>, <span class="string">git:</span> <span class="string">'https://github.com/mdxp/nodejs-cookbook'</span></span><br><span class="line">cookbook <span class="string">'rbenv'</span>, <span class="string">git:</span> <span class="string">'https://github.com/fnichol/chef-rbenv'</span></span><br><span class="line">cookbook <span class="string">'vim'</span></span><br></pre></td></tr></table></figure></p>
<p>Pada Cheffile tersebut disebutkan prerequisites pada virtual mesin, dan ketika vagrant dijalankan untuk pertama kalinya akan secara otomatis melakukan installasi prerequisites tersebut.</p>
<hr>
<p>Buka Vagrantfile yang telah tergenerate sebelumnya. Akan ada banyak konfigurasi pada file tersebut. Untuk sekarang kita hanya membutuhkan konfigurasi sebagai berikut :</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- mode: ruby -*-</span></span><br><span class="line"><span class="comment"># vi: set ft=ruby :</span></span><br><span class="line"></span><br><span class="line"><span class="constant">VAGRANTFILE_API_VERSION </span>= <span class="string">"2"</span></span><br><span class="line"></span><br><span class="line"><span class="constant">Vagrant.</span>configure(<span class="constant">VAGRANTFILE_API_VERSION)</span> <span class="keyword">do</span> |config|</span><br><span class="line">  <span class="comment"># Use Ubuntu 14.04 Trusty Tahr 64-bit as our operating system</span></span><br><span class="line">  config.vm.box = <span class="string">"ubuntu/trusty64"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Configurate the virtual machine to use 2GB of RAM</span></span><br><span class="line">  config.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |vb|</span><br><span class="line">    vb.customize [<span class="string">"modifyvm"</span>, <span class="symbol">:id</span>, <span class="string">"--memory"</span>, <span class="string">"2048"</span>]</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Forward the Rails server default port to the host</span></span><br><span class="line">  config.vm.network <span class="symbol">:forwarded_port</span>, <span class="symbol">guest:</span> <span class="number">3000</span>, <span class="symbol">host:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Use Chef Solo to provision our virtual machine</span></span><br><span class="line">  config.vm.provision <span class="symbol">:chef_solo</span> <span class="keyword">do</span> |chef|</span><br><span class="line">    chef.cookbooks_path = [<span class="string">"cookbooks"</span>]</span><br><span class="line"></span><br><span class="line">    chef.add_recipe <span class="string">"apt"</span></span><br><span class="line">    chef.add_recipe <span class="string">"nodejs"</span></span><br><span class="line">    chef.add_recipe <span class="string">"ruby_build"</span></span><br><span class="line">    chef.add_recipe <span class="string">"rbenv::user"</span></span><br><span class="line">    chef.add_recipe <span class="string">"rbenv::vagrant"</span></span><br><span class="line">    chef.add_recipe <span class="string">"vim"</span></span><br><span class="line">    chef.add_recipe <span class="string">"mysql::server"</span></span><br><span class="line">    chef.add_recipe <span class="string">"mysql::client"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Install Ruby 2.1.2 and Bundler</span></span><br><span class="line">    <span class="comment"># Set an empty root password for MySQL to make things simple</span></span><br><span class="line">    chef.json = &#123;</span><br><span class="line">      <span class="symbol">rbenv:</span> &#123;</span><br><span class="line">        <span class="symbol">user_installs:</span> [&#123;</span><br><span class="line">          <span class="symbol">user:</span> <span class="string">'vagrant'</span>,</span><br><span class="line">          <span class="symbol">rubies:</span> [<span class="string">"2.1.2"</span>],</span><br><span class="line">          <span class="symbol">global:</span> <span class="string">"2.1.2"</span>,</span><br><span class="line">          <span class="symbol">gems:</span> &#123;</span><br><span class="line">            <span class="string">"2.1.2"</span> =&gt; [</span><br><span class="line">              &#123; <span class="symbol">name:</span> <span class="string">"bundler"</span> &#125;</span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="symbol">mysql:</span> &#123;</span><br><span class="line">        <span class="symbol">server_root_password:</span> <span class="string">''</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p><code>add_recipe</code> akan meng<em>include receipe</em> dari Cheffile kita ketika vagrant dijalankan.</p>
<p>Anda dapat menambahkan <em>receipes</em> sesuai kebutuhan Anda (tambahkan di Cheffile dan include di Vagrantfile). Untuk daftar <em>receipes</em> dapat Anda temukan pada repository <a href="https://github.com/opscode-cookbooks" target="_blank" rel="external">opscode-cookbooks</a></p>
<hr>
<h5 id="STEP_3_-_Running_Vagrant"><a href="#STEP_3_-_Running_Vagrant" class="headerlink" title="STEP 3 - Running Vagrant"></a>STEP 3 - Running Vagrant</h5><ul>
<li><code>$ vagrant up</code>, Proses ini akan memakan waktu lama untuk pertamakalinya karena akan melakukan installasi OS sesuai konfigurasi dan <em>prerequisites</em> yang dibutuhkan. Untuk selanjutnya akan sangat lebih cepat karena semua configurasi telah terinstall</li>
<li>(additional info) Ketika Anda melakukan perubahan pada Vagrantfile dan Cheffile, maka Anda perlu untuk melakukan <code>$ vagrant provision</code></li>
<li>(additional info) ketika vagrant telah <code>up</code> dan Anda ingin mematikan virtual mesin Anda, cukup dengan <code>$ vagrant halt</code></li>
<li><code>$ vagrant ssh</code>, perintah ini akan melakukan ssh ke virtual mesin</li>
<li>Ketika telah masuk ke ssh mesin virtual, pindah ke shared directory antara host dan virtual mesin <code>$ cd /vagrant</code>. Anda dapat mengecek dengan <code>$ ls</code> untuk memastikan directory pada virtual mesin memiliki isi sama persis dengan directory aplikasi pada host komputer Anda</li>
<li>Jalankan perintah dasar Ruby on Rails (<code>bundle</code>, <code>db:create</code>, <code>db:migrate</code>, dsb sampai <code>rails s</code>)</li>
<li>Buka browser seperti biasa, dan akses <code>localhost:port</code> Anda</li>
</ul>
<p>Berikut adalah output yang akan tampil pada terminal ketika melakukan <code>$ vagrant up</code> dan <code>$ vagrant ssh</code><br><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># The commented lines are the output you should see when you run these commands</span></span><br><span class="line"></span><br><span class="line">vagrant up</span><br><span class="line"><span class="preprocessor">#==&gt; default: Checking if box 'ubuntu/trusty64' is up to date...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Clearing any previously set forwarded ports...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Installing Chef cookbooks with Librarian-Chef...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: The cookbook path '/Users/chris/code/test_app/site-cookbooks' doesn't exist. Ignoring...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Clearing any previously set network interfaces...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Preparing network interfaces based on configuration...</span></span><br><span class="line"><span class="preprocessor">#    default: Adapter 1: nat</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Forwarding ports...</span></span><br><span class="line"><span class="preprocessor">#    default: 3000 =&gt; 8080 (adapter 1)</span></span><br><span class="line"><span class="preprocessor">#    default: 22 =&gt; 2222 (adapter 1)</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Running 'pre-boot' VM customizations...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Booting VM...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Waiting for machine to boot. This may take a few minutes...</span></span><br><span class="line"><span class="preprocessor">#    default: SSH address: 127.0.0.1:2222</span></span><br><span class="line"><span class="preprocessor">#    default: SSH username: vagrant</span></span><br><span class="line"><span class="preprocessor">#    default: SSH auth method: private key</span></span><br><span class="line"><span class="preprocessor">#    default: Warning: Connection timeout. Retrying...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Machine booted and ready!</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Checking for guest additions in VM...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Mounting shared folders...</span></span><br><span class="line"><span class="preprocessor">#    default: /vagrant =&gt; /Users/chris/code/test_app</span></span><br><span class="line"><span class="preprocessor">#   default: /tmp/vagrant-chef-1/chef-solo-1/cookbooks =&gt; /Users/chris/code/test_app/cookbooks</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: VM already provisioned. Run `vagrant provision` or use `--provision` to force it</span></span><br><span class="line"></span><br><span class="line">vagrant ssh</span><br><span class="line"><span class="preprocessor">#Welcome to Ubuntu 14.04 LTS (GNU/Linux 3.13.0-24-generic x86_64)</span></span><br><span class="line"><span class="preprocessor">#</span></span><br><span class="line"><span class="preprocessor"># * Documentation:  https://help.ubuntu.com/</span></span><br><span class="line"><span class="preprocessor">#</span></span><br><span class="line"><span class="preprocessor"># System information disabled due to load higher than 1.0</span></span><br><span class="line"><span class="preprocessor">#</span></span><br><span class="line"><span class="preprocessor">#  Get cloud support with Ubuntu Advantage Cloud Guest:</span></span><br><span class="line"><span class="preprocessor">#    http://www.ubuntu.com/business/services/cloud</span></span><br><span class="line"><span class="preprocessor">#</span></span><br><span class="line"><span class="preprocessor">#</span></span><br><span class="line"><span class="preprocessor">#vagrant@vagrant-ubuntu-trusty-64:~$</span></span><br></pre></td></tr></table></figure></p>
<p>Perlu diketahui, pada Vagrantfile terdapat konfigurasi <code>config.vm.network :forwarded_port, guest: 3000, host: 8080</code>, maksudnya adalah ketika anda running di virtual mesin pada <code>port 3000</code> maka untuk menampilkan aplikasi pada browser harus pada <code>port 8080</code>.</p>
<p>Ketika Anda menginginkan environment terdistribusi memiliki <em>state</em> yang sama (misal data pada database, dsb) Anda dapat menjalankan perintah <code>$ vagrant package</code>. Perintah tersebut akan menggenerate <em>box</em>, dan Anda dapat memberikan kepada team kolaborasi Anda sehingga mereka memiliki development environment yang sama dengan yang Anda miliki.</p>
<p>Untuk daftar CLI vagrant, dapat ditemukan pada <a href="https://docs.vagrantup.com/v2/cli" target="_blank" rel="external">Vagrant Command-Line Interface</a></p>
<hr>
<p>Vagrant memberikan kemudahan kepada team kolaborasi untuk dapat memiliki environment yang sama antara satu dengan yang lain, sehingga horror <strong>It works on my machine</strong> tidak akan terjadi lagi (:</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>“Kok dilokalku g jalan gini app nya?”</p>
<p>Sering ngalamin masalah itu? Dimana ketika suatu fitur dapat berjalan di lokal developer lain, sedangkan di lokal kita error disana-sini / bahkan app tersebut tidak dapat berjalan sama sekali.</p>
<p>Yep, saya sering mengalaminya dan sekarang ada solusinya!</p>]]>
    
    </summary>
    
      <category term="DevOps" scheme="http://absyah.github.io/all-tags/DevOps/"/>
    
      <category term="RubyOnRails" scheme="http://absyah.github.io/all-tags/RubyOnRails/"/>
    
      <category term="Programming" scheme="http://absyah.github.io/all-archivescategories/Programming/"/>
    
  </entry>
  
</feed>
